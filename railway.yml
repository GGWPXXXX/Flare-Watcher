version: 2.0
buildCommand: |
  python -m venv /workspace/venv && \
  source /workspace/venv/bin/activate && \
  pip install --upgrade pip && \
  apt-get update && \
  apt-get install -y ffmpeg libsm6 libxext6 libxrender-dev libgl1 libgl1-mesa-glx libgl1-mesa-dev libglib2.0-0 && \
  pip uninstall opencv-python && \
  pip install -r requirements.txt

services:
  - name: web
    env:
      - PYTHONUNBUFFERED=1
    buildCommand: skip
    port: 8000
